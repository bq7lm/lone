{% extends "base.html" %}
{% block content %}

<div class="auth-box">

    <!-- Иконка и название -->
    <div class="auth-logo">
        <img src="{{ url_for('static', filename='lone-icon.png') }}" alt="Lone Icon">
        <span class="auth-title">Lone</span>
    </div>

    <p class="auth-sub">Создание аккаунта</p>

    <form method="POST" id="register-form">
        {{ form.hidden_tag() }}

        <div class="input-group">
            {{ form.username(placeholder="Username", id="username") }}
        </div>

        <div class="input-group">
            {{ form.password(placeholder="Пароль", id="password") }}
        </div>

        <div id="register-feedback" class="feedback"></div>

        <button class="auth-btn" type="submit">Создать аккаунт</button>
    </form>

    <p class="auth-switch">
        Уже есть аккаунт?
        <span class="auth-link" onclick="window.location='{{ url_for('login') }}'">Войти</span>
    </p>
</div>

<script>
const regForm = document.getElementById('register-form');
const regFeedback = document.getElementById('register-feedback');

regForm.addEventListener('submit', (e) => {
    const username = document.getElementById('username').value.trim();
    const password = document.getElementById('password').value.trim();
    regFeedback.innerHTML = '';

    // Проверка пароля
    if (password.length < 6) {
        e.preventDefault();
        regFeedback.innerHTML = 'Пароль слишком короткий';
        return;
    }
    if (!/^[A-Za-z0-9]+$/.test(password)) {
        e.preventDefault();
        regFeedback.innerHTML = 'Пароль содержит недопустимые символы';
        return;
    }
});
</script>

{% endblock %}
